<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ä¸ƒå¤•ã®é¡˜ã„ã”ã¨ãƒ¡ãƒ¼ã‚«ãƒ¼</title>
  <style>
    /* ===== å…±é€šã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆPCãƒ»ã‚¹ãƒãƒ›å…±é€šï¼‰ ===== */
  
  /* ãƒšãƒ¼ã‚¸å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ«è¨­å®š */
  body {
    background-size: cover; /* èƒŒæ™¯ç”»åƒã‚’ç”»é¢ã„ã£ã±ã„ã«åºƒã’ã‚‹ */
    text-align: center;     /* ä¸­å¤®æƒãˆ */
    padding: 30px;          /* å†…å´ã®ä½™ç™½ */
    min-height: 100vh;      /* æœ€ä½ã§ã‚‚ç”»é¢ã®é«˜ã•åˆ†ã‚’ç¢ºä¿ */
    color: #004d40;         /* æ–‡å­—ã®è‰²ï¼ˆæ·±ç·‘ï¼‰ */
    font-family: sans-serif; /* èª­ã¿ã‚„ã™ã„ãƒ•ã‚©ãƒ³ãƒˆ */
  /* 
    background: url('bg.jpg') no-repeat center center;
    background-size:contain; */
  }
  
  /* ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆh1ï¼‰ã®è¦‹ãŸç›® */
  h1 {
    font-size: 2em;         /* å¤§ããªæ–‡å­— */
    margin-bottom: 20px;    /* ä¸‹ã«ä½™ç™½ */
  }
  
  /* å…¥åŠ›æ¬„ã¨ãƒœã‚¿ãƒ³ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
  input,
  button {
    padding: 10px;          /* å†…å´ã®ä½™ç™½ */
    font-size: 16px;        /* æ–‡å­—ã‚µã‚¤ã‚º */
    margin: 5px;            /* å¤–å´ã®ä½™ç™½ */
    border: 1px solid #ccc; /* è–„ã„ã‚°ãƒ¬ãƒ¼ã®æ ç·š */
    border-radius: 5px;     /* å°‘ã—è§’ã‚’ä¸¸ã */
  }
  
  /* ç¬¹ã®æœ¨ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ */
  #tree {
    margin: 30px auto 0;                 /* ä¸Šã«ä½™ç™½ã€å·¦å³ä¸­å¤®ã«é…ç½® */
    width: 90%;                          /* ç”»é¢ã®90%ã®å¹… */
    max-width: 800px;                    /* æœ€å¤§å¹…800pxã¾ã§ */
    height: 500px;                       /* é«˜ã•å›ºå®š */
    position: relative;                 /* ä¸­ã«ã‚ã‚‹çŸ­å†Šã‚’è‡ªç”±ã«é…ç½®ã™ã‚‹ãŸã‚ã«å¿…è¦ */
    border: 2px dashed #00695c;          /* ç·‘è‰²ã®ç‚¹ç·šã®æ  */
    border-radius: 12px;                 /* æ ã®è§’ã‚’ä¸¸ã‚ã‚‹ */
    background-color: rgba(255, 255, 255, 0.6); /* èƒŒæ™¯ã‚’ç™½ã®åŠé€æ˜ã«ã—ã¦è¦‹ã‚„ã™ã */
    backdrop-filter: blur(4px);          /* èƒŒæ™¯ã‚’ã¼ã‹ã—ã¦è¦–èªæ€§ã‚’ã‚¢ãƒƒãƒ—ï¼ˆå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ã®ã¿ï¼‰ */
    background: url('3521.png') no-repeat center top fixed; /* èƒŒæ™¯ç”»åƒã‚’ä¸­å¤®ä¸Šéƒ¨ã«å›ºå®šã§è¡¨ç¤º */
    background-size: cover;              /* ç”»åƒã‚’å…¨ä½“ã«åºƒã’ã‚‹ */
  }
  
  /* é¡˜ã„äº‹ã®çŸ­å†Šã‚¹ã‚¿ã‚¤ãƒ« */
  .wish {
    background-color: pink; /* JSã§ä¸Šæ›¸ãã•ã‚Œã‚‹åŸºæœ¬è‰² */
    border: 2px solid #f48fb1; /* æ ç·š */
    border-radius: 4px; /* è§’ã‚’å°‘ã—ä¸¸ã‚ã‚‹ */
    padding: 10px 8px; /* ä¸Šä¸‹ã«ä½™è£•ã‚’æŒãŸã›ã‚‹ */
    margin: 5px;
    width: 50px; /* å¹…ã‚’ç´°ã‚ã« */
    height: 160px; /* é«˜ã•ã‚’é•·ã‚ã«ã—ã¦ç¸¦é•·ã« */
    position: absolute;
    animation: sway 2s infinite ease-in-out;
    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2); /* å½±ã‚’å¼·ã‚ã« */
    font-size: 14px;
    line-height: 1.4;
    writing-mode: vertical-rl; /* ç¸¦æ›¸ãé¢¨ã«ã™ã‚‹ï¼ˆç¸¦æ›¸ãå¯¾å¿œç’°å¢ƒã§ï¼‰ */
    text-align: center;
  
    /* ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§è³ªæ„Ÿã‚’è¿½åŠ  */
    background-image: linear-gradient(to bottom, rgba(255,255,255,0.4), transparent);
  }
  
  /* çŸ­å†Šã®ç©´ã‚’å†ç¾ï¼ˆæ“¬ä¼¼è¦ç´ ï¼‰ */
  .wish::before {
    content: "";
    display: block;
    width: 12px;
    height: 12px;
    background-color: white;
    border: 1px solid #888;
    border-radius: 50%;
    margin: 0 auto 6px auto;
    box-shadow: inset 1px 1px 2px rgba(0,0,0,0.2);
  }
  
  
  /* çŸ­å†Šã‚’ã‚†ã‚‰ã‚†ã‚‰æºã‚‰ã™ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
  @keyframes sway {
    0% {
      transform: rotate(-3deg);         /* å·¦ã«3åº¦å‚¾ã‘ã‚‹ */
    }
    50% {
      transform: rotate(3deg);          /* å³ã«3åº¦å‚¾ã‘ã‚‹ */
    }
    100% {
      transform: rotate(-3deg);         /* ã¾ãŸå·¦ã«æˆ»ã‚‹ */
    }
  }
  
  /* ===== ã‚¹ãƒãƒ›å¯¾å¿œã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆå¹…ãŒ600pxä»¥ä¸‹ã®ã¨ãé©ç”¨ï¼‰ ===== */
  @media screen and (max-width: 600px) {
    /* ã‚¿ã‚¤ãƒˆãƒ«ã‚’å°‘ã—å°ã•ã */
    h1 {
      font-size: 1.5em;
    }
  
    /* å…¥åŠ›æ¬„ã‚„ãƒœã‚¿ãƒ³ã‚’å¹…åºƒã«ã—ã€æŒ‡ã§æŠ¼ã—ã‚„ã™ã */
    input,
    button {
      width: 90%;        /* æ¨ªå¹…ã‚’ç”»é¢ã®9å‰²ã« */
      font-size: 14px;   /* æ–‡å­—ã‚‚å°‘ã—å°ã•ã‚ã« */
    }
  
    /* ç¬¹ã®ã‚¨ãƒªã‚¢ã‚‚é«˜ã•ã‚’å°‘ã—ä½ã */
    #tree {
      height: 400px;           /* é«˜ã•ã‚’ã‚„ã‚„ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
      background-position: center top;
      background-size: contain; /* èƒŒæ™¯ç”»åƒãŒã¯ã¿å‡ºãªã„ã‚ˆã†ã«ç¸®å° */
    }
  
    /* çŸ­å†Šã®ã‚µã‚¤ã‚ºã‚„æ–‡å­—ã‚‚å°‘ã—å°ã•ã */
    .wish {
      width: 100px;           /* å¹…ã‚’ã‚„ã‚„å°ã•ã‚ã« */
      font-size: 12px;        /* æ–‡å­—ã‚‚å°ã•ã‚ã«ã—ã¦è¦‹ã‚„ã™ã */
    }
  }
  #counter {
      margin-top: 15px;
      font-weight: bold;
    }
  
  
    </style>
</head>
<body>

  <h1>ğŸ‹ ä¸ƒå¤•ã®é¡˜ã„ã”ã¨ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>
  <input type="text" id="wishInput" placeholder="é¡˜ã„ã”ã¨ã‚’å…¥åŠ›">
  <button id="addWishBtn">çŸ­å†Šã«æ›¸ã„ã¦ãŠé¡˜ã„ã™ã‚‹</button>
  <p id="counter">çŸ­å†Šã®æ•°: 0æš</p>
  <div id="tree"></div>

  <script>
    // ç¦æ­¢ãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ
    const ngWords = ["æ­»", "æ®º", "ãƒã‚«", "ã‚¢ãƒ›", "å‘ª", "ç ´å£Š", "ãƒ†ãƒ­"];

    // åˆæœŸåŒ–ï¼šä¿å­˜ã•ã‚ŒãŸçŸ­å†Šã‚’å¾©å…ƒ
    window.addEventListener("DOMContentLoaded", () => {
      const savedWishes = JSON.parse(localStorage.getItem("wishes") || "[]");
      savedWishes.forEach(wish => createWishTag(wish, false)); // false: ã‚¿ã‚¤ãƒãƒ¼ã§æ¶ˆã•ãªã„
      updateCounter(savedWishes.length);
    });

    // ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
    document.getElementById("addWishBtn").addEventListener("click", () => {
      const input = document.getElementById("wishInput");
      const wishText = input.value.trim();
      if (!wishText) return;

      const isNG = ngWords.some(word => wishText.includes(word));
      if (isNG) {
        alert("ãã®å†…å®¹ã¯ç™»éŒ²ã§ãã¾ã›ã‚“ã€‚è¨€è‘‰ã‚’è¦‹ç›´ã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      createWishTag(wishText, true); // true: 10ç§’å¾Œã«æ¶ˆãˆã‚‹
      saveWish(wishText);            // localStorageã«ä¿å­˜
      updateCounter();               // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ›´æ–°
      input.value = "";
    });

    // çŸ­å†Šã‚’ä½œã‚‹é–¢æ•°
    function createWishTag(text, autoRemove) {
      const wishTag = document.createElement("div");
      wishTag.className = "wish";
      wishTag.textContent = text;

      const tree = document.getElementById("tree");
      const treeWidth = tree.offsetWidth;
      const treeHeight = tree.offsetHeight;
      const x = Math.random() * (treeWidth - 130);
      const y = Math.random() * (treeHeight - 50);
      wishTag.style.left = `${x}px`;
      wishTag.style.top = `${y}px`;

      const colors = ['#f4ffb1', '#ffdf4f', '#afd581', '#8fd4fa', '#fe93d8'];
      wishTag.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

      tree.appendChild(wishTag);

      // å‰Šé™¤å‡¦ç†ï¼ˆã‚¯ãƒªãƒƒã‚¯æ™‚ï¼‰
      wishTag.addEventListener("click", () => {
        tree.removeChild(wishTag);
        removeWish(text);
        updateCounter();
      });

      // è‡ªå‹•å‰Šé™¤ï¼ˆ10ç§’å¾Œï¼‰
      if (autoRemove) {
        setTimeout(() => {
          if (tree.contains(wishTag)) {
            tree.removeChild(wishTag);
            removeWish(text);
            updateCounter();
          }
        }, 10000);
      }
    }

    // ä¿å­˜å‡¦ç†
    function saveWish(text) {
      const wishes = JSON.parse(localStorage.getItem("wishes") || "[]");
      wishes.push(text);
      localStorage.setItem("wishes", JSON.stringify(wishes));
    }

    // å‰Šé™¤å‡¦ç†
    function removeWish(text) {
      let wishes = JSON.parse(localStorage.getItem("wishes") || "[]");
      wishes = wishes.filter(item => item !== text);
      localStorage.setItem("wishes", JSON.stringify(wishes));
    }

    // ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æ›´æ–°
    function updateCounter(count = null) {
      if (count === null) {
        const wishes = JSON.parse(localStorage.getItem("wishes") || "[]");
        count = wishes.length;
      }
      document.getElementById("counter").textContent = `çŸ­å†Šã®æ•°: ${count}æš`;
    }
  </script>
</body>
</html>
